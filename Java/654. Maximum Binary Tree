/**
 * Definition for a binary tree node.
 * public class TreeNode {
 *     int val;
 *     TreeNode left;
 *     TreeNode right;
 *     TreeNode(int x) { val = x; }
 * }
 */
class Solution {
    public TreeNode constructMaximumBinaryTree(int[] nums) 
    {
    	//check null
    	if( nums==null || nums.length==0 )
    	{
    		return null;
    	}
    	
    	return constructMaximumBinaryTree( nums, 0, nums.length-1 );
    }
    
    private TreeNode constructMaximumBinaryTree( int[] nums, int left, int right )
    {
    	if( left > right )
    	{
    		return null;
    	}
    	
    	int maxIndex = getMax( nums, left, right );
    	TreeNode result = new TreeNode(nums[maxIndex]);
    	
    	//recursive 
    	result.left = constructMaximumBinaryTree( nums, left, maxIndex-1 );
    	result.right = constructMaximumBinaryTree( nums, maxIndex+1, right );
    	
    	return result;
    }
    
    private int getMax( int[] nums, int left, int right )
    {
    	int maxIndex = left;
    	for( int i=left; i<=right; i++ )
    	{
    		if( nums[i] > nums[maxIndex] )
    		{
    			maxIndex = i;
    		}
    	}
    	
    	return maxIndex;
    }	
}
